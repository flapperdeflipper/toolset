#!/usr/bin/env toolset
# vi: ft=bash
# shellcheck shell=bash


##
## Print help output
##

# shellcheck disable=SC2154
function usage {
    cat <<EOF

    Create or update and SSM parameter

    This script can be used to create or update SSM parameters.

    ${TOOLSET_SCRIPT_NAME} <lineno>

   Arguments:
    -h, --help  - Show this menu

    Example:
      ${TOOLSET_SCRIPT_NAME} <PATH> <VALUE>

EOF

    exit 0
}


function main {
    if var::ne "${#}" 2 \
    || interact::usage "${@}"
    then
        usage
    fi

    local path="${1}"; shift
    local value="${1}"; shift

    if var::is_empty "${path}" \
    || var::is_empty "${value}"
    then
        usage
    fi

    aws::check_for_admin || return 1
    depends::check_list jq aws chronic

    aws::ssm::put_parameter "${path}" "${value}" || return 1
}


main "${@}"
